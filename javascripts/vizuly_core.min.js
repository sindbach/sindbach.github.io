/*! vizuly 17-03-2016 */
var vizuly = {};
vizuly.version = "1.0", vizuly.color = {}, vizuly.color.shift = function(a, b) {
    return a = "0x" + a.replace("#", ""), a = parseInt(a, 16), a += 65793, a |= b, "#" + a.toString(16)
}, vizuly.format = {}, vizuly.format.YEAR_Mon_MonDay = d3.time.format.multi([
    [".%L", function(a) {
        return a.getMilliseconds()
    }],
    [":%S", function(a) {
        return a.getSeconds()
    }],
    ["%I:%M", function(a) {
        return a.getMinutes()
    }],
    ["%I %p", function(a) {
        return a.getHours()
    }],
    ["%a %d", function(a) {
        return a.getDay() && 1 != a.getDate()
    }],
    ["%b %d", function(a) {
        return 1 != a.getDate()
    }],
    ["%b", function(a) {
        return a.getMonth()
    }],
    ["20%y", function(a) {
        return !0
    }]
]), vizuly.util = {}, vizuly.util.size = function(a, b, c) {
    return size = {}, size.width = b - vizuly.util.measure(a.left, b) - vizuly.util.measure(a.right, b), size.height = c - vizuly.util.measure(a.top, c) - vizuly.util.measure(a.bottom, c), size.top = vizuly.util.measure(a.top, c), size.left = vizuly.util.measure(a.left, b), size
}, vizuly.util.getTypedScale = function(a) {
    var b;
    return b = "string" == typeof a ? d3.scale.ordinal() : a instanceof Date ? d3.time.scale() : d3.scale.linear()
}, vizuly.util.setRange = function(a, b, c) {
    "string" == typeof a.domain()[0] ? a.rangeBands([b, c], 0) : a.range([b, c])
}, vizuly.util.measure = function(a, b) {
    if ("string" == typeof a && "%" == a.substr(a.length - 1)) {
        var c = Math.min(Number(a.substr(0, a.length - 1)), 100) / 100;
        return Math.round(b * c)
    }
    return a
}, vizuly.util.guid = function() {
    return "vzxxxxxxxx".replace(/[xy]/g, function(a) {
        var b = 16 * Math.random() | 0,
            c = "x" === a ? b : 3 & b | 8;
        return c.toString(16)
    })
}, vizuly.util.getDefs = function(a) {
    return defs = a.selection().selectAll("svg defs"), defs[0].length < 1 && (defs = a.selection().select("svg").append("defs")), defs
}, vizuly.viz = {}, vizuly.viz.create = function(a, b, c, d) {
    b.parent = a, b.selection = d3.select(a).append("div").style("width", "100%").style("height", "100%"), b.properties = c, b.id = vizuly.util.guid();
    var e = [];
    e.push("mouseover"), e.push("mouseout"), e.push("mousedown"), e.push("click"), e.push("touch"), e.push("zoom"), e.push("zoomstart"), e.push("zoomend"), e.push("initialize"), e.push("validate"), e.push("measure"), e.push("update"), Object.getOwnPropertyNames(c).forEach(function(a, b, c) {
        e.push(a + "_change")
    }), d && d.length > 0 && d.forEach(function(a) {
        e.push(a)
    }), b.dispatch = d3.dispatch.apply(this, e);
    var f = function() {
        return setProps(f, b, b.properties), f
    };
    return setProps = function(a, b, c) {
        Object.getOwnPropertyNames(c).forEach(function(d, e, f) {
            "undefined" == typeof b[d] && (b[d] = c[d], a[d] = function(c) {
                if (!arguments.length) return b[d];
                var e = b[d];
                return b[d] = c, b[d] !== e && b.dispatch[d + "_change"].apply(this, [b[d], e]), a
            })
        })
    }, f.id = function() {
        return b.id
    }, f.selection = function() {
        return b.selection
    }, f.on = function(a, c) {
        return b.dispatch.on(a, c), f
    }, f.validate = function() {
        if (!a) {
            var a = [];
            if (Object.getOwnPropertyNames(c).forEach(function(c) {
                    !b[c] && Number(0 != b[c]) && a.push(c)
                }), a.length > 0) throw new Error("vizuly.util.viz.validate(): " + a.concat() + " need to be declared");
            b.dispatch.validate()
        }
    }, f()
}, vizuly.svg = {}, vizuly.svg.filter = {}, vizuly.svg.filter.dropShadow = function(a, b, c, d) {
    var e = Math.round(100 * b) + "_" + Math.round(100 * c) + "_" + Math.round(100 * d),
        f = a.id(),
        g = vizuly.util.getDefs(a),
        h = g.selectAll("#vz_filter_" + f + "_" + e).data([e]).enter().append("filter").attr("id", "vz_filter_" + f + "_" + e).attr("class", "vz-svg-filter-dropShadow").attr("width", "300%").attr("height", "300%");
    h.append("feGaussianBlur").attr("in", "SourceAlpha").attr("stdDeviation", d), h.append("feOffset").attr("dx", b).attr("dy", c), h.append("feComponentTransfer").append("feFuncA").attr("type", "linear").attr("slope", .2);
    var i = h.append("feMerge");
    return i.append("feMergeNode"), i.append("feMergeNode").attr("in", "SourceGraphic"), "#vz_filter_" + f + "_" + e
}, vizuly.svg.gradient = {}, vizuly.svg.gradient.blend = function(a, b, c, d) {
    var e, f, g, h, i = String(b).replace("#", "") + String(c).replace("#", ""),
        j = "vz_gradient_blend_" + a.id() + "_" + i;
    "horizontal" == d ? (e = "100%", f = "0%", g = "0%", h = "0%") : (e = "0%", f = "0%", g = "100%", h = "0%");
    var k = vizuly.util.getDefs(a),
        l = k.selectAll("#" + j).data([i]).enter().append("linearGradient").attr("id", j).attr("class", "vz-svg-gradient-blend").attr("x1", e).attr("x2", f).attr("y1", g).attr("y2", h);
    return l.append("stop").attr("offset", "0%").attr("stop-color", b), l.append("stop").attr("offset", "100%").attr("stop-color", c), l = k.selectAll("#" + j)
}, vizuly.svg.gradient.fade = function(a, b, c, d, e) {
    e || (e = [0, 1]), d || (d = [.75, .9]);
    var f, g, h, i, j = String(b).replace("#", ""),
        k = "vz_gradient_fade_" + a.id() + "_" + j;
    "horizontal" == c ? (f = "0%", g = "100%", h = "0%", i = "0%") : (f = "0%", g = "0%", h = "100%", i = "0%");
    var l = vizuly.util.getDefs(a),
        m = l.selectAll("#" + k).data([j]).enter().append("linearGradient").attr("id", k).attr("class", "vz-svg-gradient-fade").attr("x1", f).attr("x2", g).attr("y1", h).attr("y2", i);
    return m.append("stop").attr("offset", 100 * e[0] + "%").attr("stop-color", b).attr("stop-opacity", d[0]), m.append("stop").attr("offset", 100 * e[1] + "%").attr("stop-color", b).attr("stop-opacity", d[1]), m = l.selectAll("#" + k)
}, vizuly.svg.gradient.radialFade = function(a, b, c, d) {
    d || (d = [0, 1]), c || (c = [.75, .9]);
    var e = String(b).replace("#", ""),
        f = "vz_gradient_radial_fade" + a.id() + "_" + e,
        g = vizuly.util.getDefs(a),
        h = g.selectAll("#" + f).data([e]).enter().append("radialGradient").attr("id", f).attr("class", "vz-svg-gradient-radial-fade");
    return h.append("stop").attr("offset", 100 * d[0] + "%").attr("stop-color", b).attr("stop-opacity", c[0]), h.append("stop").attr("offset", 100 * d[1] + "%").attr("stop-color", b).attr("stop-opacity", c[1]), h = g.selectAll("#" + f)
}, vizuly.svg.gradient.darker = function(a, b, c) {
    var d, e, f, g, h = String(b).replace("#", ""),
        i = "vz_gradient_darker_" + a.id() + "_" + h;
    "horizontal" == c ? (d = "100%", e = "0%", f = "0%", g = "0%") : (d = "0%", e = "0%", f = "100%", g = "0%");
    var j = vizuly.util.getDefs(a),
        k = j.selectAll("#" + i).data([h]).enter().append("linearGradient").attr("class", "vz-gradient-darker").attr("id", i).attr("x1", d).attr("x2", e).attr("y1", f).attr("y2", g);
    return k.append("stop").attr("offset", "0%").attr("stop-color", b).attr("stop-opacity", .75), k.append("stop").attr("offset", "100%").attr("stop-color", d3.rgb(b).darker()).attr("stop-opacity", .9), k = j.selectAll("#" + i)
}, vizuly.svg.text = {}, vizuly.svg.text.arcPath = function(a, b) {
    var c = .0174533,
        d = {};
    d.angle = b, d.startAngle = d.angle - 179 * c, d.endAngle = d.angle + 179 * c;
    var e = d3.svg.arc().innerRadius(a).outerRadius(a)(d),
        f = /[Mm][\d\.\-e,\s]+[Aa][\d\.\-e,\s]+/,
        g = f.exec(e)[0];
    return g
}, vizuly.component = {}, vizuly.component.layout = {}, vizuly.component.layout.CLUSTERED = "CLUSTERED", vizuly.component.layout.STACKED = "STACKED", vizuly.component.layout.OVERLAP = "OVERLAP", vizuly.component.layout.STREAM = "STREAM", vizuly.theme = {}, vizuly.skin = {}, vizuly.skin.COLUMNBAR_AXIIS = "Axiis", vizuly.skin.COLUMNBAR_NEON = "Neon", vizuly.skin.COLUMNBAR_MATERIALBLUE = "MaterialBlue", vizuly.skin.COLUMNBAR_MATERIALPINK = "MaterialPink", 
vizuly.theme.column_bar = function(a) {

}, vizuly.theme.radial_progress = function(a) {
    function b() {
        f()
    }

    function c() {
        if (j) {
            var b = a.selection();
            b.attr("class", j["class"]), b.selectAll(".vz-radial_progress-arc").style("fill", function(a, b) {
                return j.arc_fill(a, b)
            }).style("fill-opacity", function(a, b) {
                return j.arc_fill_opacity(a, b)
            }).style("stroke", function(a, b) {
                return j.arc_stroke(a, b)
            }), b.selectAll(".vz-radial_progress-track").style("fill", j.track_fill), b.selectAll(".vz-radial_progress-label").style("fill", j.label_color).style("stroke-opacity", 0).style("font-size", .25 * a.radius())
        }
    }

    function d(b, c, d) {
        a.selection().selectAll(".vz-radial_progress-label").style("font-weight", 700)
    }

    function e(b, c, d) {
        a.selection().selectAll(".vz-radial_progress-label").style("font-weight", null)
    }

    function f() {
        i.forEach(function(b) {
            a.on(b.on, b.callback)
        })
    }

    function g() {
        i.forEach(function(b) {
            a.on(b.on, null)
        })
    }
    var h = {
            /*DEBUG WAN */
            Neon: {
                name: "Neon",
                label_color: "#6AAF4E",
                track_fill: "#d6dadc",
                progress_colors: ["#6AAF4E", "#A8C102", "#788A04", "#566204", "#383F04"],
                arc_fill: function(a, b) {
                    return this.progress_colors[b % 5]
                },
                arc_fill_opacity: function(a, b) {
                    return 1
                },
                arc_stroke: function(a, b) {
                    return this.progress_colors[b % 5]
                },
                "class": "vz-skin-neon"
            }
        },
        a = a,
        i = [{
            on: "update.theme",
            callback: c
        }, {
            on: "mouseover.theme",
            callback: d
        }, {
            on: "mouseout.theme",
            callback: e
        }];
    b(), b.apply = function(a) {
        return arguments.length > 0 && b.skin(a), c(), b
    }, b.release = function() {
        a && (a.selection().attr("class", null), g(), a = null)
    }, b.viz = function(b) {
        return arguments.length ? (a && g(), a = b, void f()) : a
    }, b.skin = function(a) {
        if (0 == arguments.length) return j;
        if (!h[a]) throw new Error("theme/linearea.js - skin " + a + " does not exist.");
        return j = h[a], b
    }, b.skins = function() {
        return h
    };
    var j = h[vizuly.skin.RADIAL_PROGRESS_NEON];
    return b
}, vizuly.skin.RADIAL_PROGRESS_NEON = "Neon", vizuly.theme.scatter = function(a) {
    function b() {
        h()
    }

    function c() {
        if (i) {
            var b = a.width(),
                c = Math.min(a.width(), a.height()) / 80,
                d = a.selection();
            d.attr("class", i["class"]), d.selectAll(".vz-background").attr("fill", function() {
                return "url(#" + j.attr("id") + ")"
            }), d.selectAll(".vz-plot-background").style("opacity", 0), d.selectAll(".vz-scatter-bottom-axis").style("font-weight", i.xAxis_font_weight).style("fill", i.labelColor).style("font-size", Math.max(8, Math.round(b / 85)) + "px").style("opacity", function() {
                return b > 399 ? 1 : 0
            }), d.selectAll(".vz-scatter-left-axis line").style("stroke", i.yAxis_line_stroke).style("stroke-width", 1).style("opacity", i.yAxis_line_opacity), d.selectAll(".vz-scatter-left-axis text").style("font-size", Math.max(8, Math.round(b / 85)) + "px").style("fill", i.labelColor).style("fill-opacity", .6), d.selectAll(".vz-scatter-node").style("stroke-width", c).style("stroke-opacity", 0).style("stroke", function(a, b) {
                return i.node_stroke(a, b)
            }).style("fill", function(a, b) {
                return i.node_fill(a, b)
            }).style("fill-opacity", function(a, b) {
                return i.node_fill_opacity(a, b)
            }), i.background_transition()
        }
    }

    function d() {
        a.yAxis().tickSize(-vizuly.util.size(a.margin(), a.width(), a.height()).width).orient("left"), a.xAxis().tickSize(-vizuly.util.size(a.margin(), a.width(), a.height()).width)
    }

    function e(b, c, d) {
        a.selection().selectAll(".vz-scatter-node").style("opacity", .15), d3.select(b).style("opacity", 1).style("stroke-opacity", .5).style("fill-opacity", .9), l.mouseover(b, c, d)
    }

    function f(b, c, d) {
        d3.select(b).style("opacity", 1).style("fill-opacity", function(a, b) {
            return i.node_fill_opacity(a, b)
        }), a.selection().selectAll(".vz-scatter-node").style("stroke-opacity", 0).style("opacity", 1)
    }

    function g() {
        a.selection().selectAll(".vz-background").style("fill-opacity", 1), j.selectAll("stop").transition().duration(500).attr("stop-color", function(a, b) {
            return 0 == b ? i.grad0 : i.grad1
        })
    }

    function h() {
        k.forEach(function(b) {
            a.on(b.on, b.callback)
        })
    }
    var a = a,
        i = null,
        j = vizuly.svg.gradient.blend(a, "#000", "#000"),
        k = [{
            on: "measure.theme",
            callback: d
        }, {
            on: "update.theme",
            callback: c
        }, {
            on: "mouseover.theme",
            callback: e
        }, {
            on: "mouseout.theme",
            callback: f
        }];
    b(), b.apply = function(a) {
        return arguments.length > 0 && b.skin(a), c(), b
    }, b.release = function() {
        a && (a.selection().attr("class", null), k.forEach(function(b) {
            a.on(b.on, null)
        }), a = null)
    }, b.viz = function(b) {
        return arguments.length ? (a = b, void h()) : a
    }, b.skin = function(a) {
        if (0 == arguments.length) return i;
        if (!m[a]) throw new Error("theme/linearea.js - skin " + a + " does not exist.");
        return i = m[a], b
    }, b.skins = function() {
        return m
    };
    var l = d3.dispatch("mouseover", "mouseout");
    b.on = function(a, c) {
        return l.on(a, c), b
    };
    var m = {
        Neon: {
            name: "Neon",
            labelColor: "#FFF",
            labelFill: "#005",
            grad0: "#000000",
            grad1: "#474747",
            background_transition: g,
            yAxis_line_stroke: "#FFF",
            yAxis_line_opacity: .25,
            node_stroke: function(a, b) {
                return "#000"
            },
            node_fill: function(a, b) {
                return "#6AAF4E"
            },
            node_fill_opacity: function(a, b) {
                return .6
            },
            "class": "vz-skin-neon"
        }
    };
    return b
};